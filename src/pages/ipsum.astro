---
import Layout from '../layouts/Layout.astro';
---

<Layout title="Kotlett Ipsum - Svenska Fyllnadstexter">
    <div class="container">
        <h1>Kotlett Ipsum</h1>
        <p class="subtitle">Svenska fyllnadstexter om den bästa köttsorten</p>

        <div class="controls">
            <div class="control-group">
                <label for="sentences">Antal meningar per stycke</label>
                <div class="slider-container">
                    <input type="range" id="sentences" min="3" max="10" value="5">
                    <span class="value-display" id="sentencesValue">5</span>
                </div>
            </div>

            <div class="control-group">
                <label for="paragraphs">Antal stycken</label>
                <div class="slider-container">
                    <input type="range" id="paragraphs" min="1" max="10" value="3">
                    <span class="value-display" id="paragraphsValue">3</span>
                </div>
            </div>
        </div>

        <textarea id="output" readonly></textarea>
        <button class="copy-btn" id="copyBtn">Kopiera till urklipp</button>
    </div>

    <script>
        const words = [
            'kotlett', 'fläskkarré', 'revbensspjäll', 'entrecôte', 'oxfilé', 'fläskfilé',
            'korv', 'falukorv', 'grillkorv', 'prinskorv', 'isterband', 'medwurst',
            'köttfärs', 'bacon', 'skinka', 'lufttorkad skinka', 'rökt skinka',
            'fläskkött', 'nötkött', 'kalvkött', 'lamm', 'älgkött', 'renkött',
            'fläsklägg', 'rökt sidfläsk', 'kassler', 'schnitzel', 'biff', 'hamburgare',
            'grillad', 'stekt', 'kokt', 'rökt', 'marinerad', 'kryddad',
            'saftig', 'mör', 'smakrik', 'välstekt', 'läcker', 'gyllenbrun',
            'senap', 'pepparrot', 'pressad gurka', 'rödkål', 'gräddsås', 'bearnaisesås',
            'potatismos', 'rostad lök', 'vitlök', 'timjan', 'rosmarin', 'peppar',
            'havet salt', 'kryddsmör', 'grillkrydda', 'soja', 'honung', 'BBQ-sås',
            'panna', 'ugn', 'grill', 'stekpanna', 'gryta', 'långkok',
            'medelstekt', 'välstekt', 'blodig', 'rosa', 'genomstekt', 'lättstekt',
            'strimlad', 'tärnad', 'skivad', 'hackad', 'delad', 'fileerad',
            'frasig', 'krispig', 'gyllene', 'smarrig', 'mustigt', 'fylligt',
            'rostbiff', 'köttbullar', 'frikadeller', 'pyttipanna', 'wallenbergare', 'falukorv',
            'fläskpannkaka', 'blodpudding', 'leverpastej', 'sylta', 'rullsylta', 'pressylta',
            'flintastek', 'skinkstek', 'picnicbog', 'högrev', 'innanlår', 'fransyska', 'ytterlår',
            'clubstek', 'T-benstek', 'bringa', 'kind', 'bog', 'rulle', 'rostas', 'biffstock', 
            'ankarstock','panerad', 'dubbelpanerad', 'bräserad', 'långbakad', 'rimmad', 'gravad', 
            'wokat', 'helstekt', 'bankad', 'lättgravad', 'halstrad','knaprig', 'karamelliserad', 
            'välhängd', 'smörstekt', 'lågtempad', 'benfri', 'med ben', 'svål', 'fettkant', 'marmorerad',
            'brunsås', 'skysås', 'svampsås', 'kantarellsås', 'rödvinssås', 'pepparsås', 'choronsås', 
            'äppelmos', 'lingonsylt', 'svartvinbärsgelé', 'rönnbärsgelé', 'picklad rödlök', 
            'saltgurka', 'inlagd gurka', 'hasselbackspotatis', 'klyftpotatis', 'potatisgratäng', 
            'stompad potatis', 'rotfruktsgratäng', 'råstekt potatis', 'pommes frites',
        ];

        const starters = [
            'Kotlett ipsum dolor amet',
            'Kotlett mör saftig grillad',
            'Kotlett väldoftande stekt',
            'Kotlett gyllenbrun krispig',
            'Kotlett mustigt kryddad',
            'Kotlett läcker marinerad',
            'Kotlett smakrik genomstekt',
            'Kotlett med svål och sälta',
            'Kotlett panerad i rikligt smör',
            'Kotlett direkt från charken',
            'Kotlett nystekt och rykande',
            'Kotlett dränkt i gräddsås',
            'Kotlett med frasig yta',
            'Kotlett, husmanskostens hjälte',
            'Kotlett saltad och pepprad',
            'Kotlett serverad med kärlek',
            'Kotlett direkt från pannan',
            'Kotlett med en klick smör',
            'Kotlett, sås och potatis',
            'Kotlett till vardag och fest'
        ];

        function getRandomWord() {
            return words[Math.floor(Math.random() * words.length)];
        }

        function capitalize(str) {
            return str.charAt(0).toUpperCase() + str.slice(1);
        }

        function generateSentence(isFirst = false) {
            const wordCount = Math.floor(Math.random() * 8) + 8; // 8-15 words
            let sentence = [];

            if (isFirst) {
                sentence.push(starters[Math.floor(Math.random() * starters.length)]);
            } else {
                sentence.push(capitalize(getRandomWord()));
            }

            for (let i = 0; i < wordCount - (isFirst ? starters[0].split(' ').length : 1); i++) {
                sentence.push(getRandomWord());
            }

            return sentence.join(' ') + '.';
        }

        function generateParagraph(sentenceCount, isFirstParagraph = false) {
            const sentences = [];
            for (let i = 0; i < sentenceCount; i++) {
                sentences.push(generateSentence(isFirstParagraph && i === 0));
            }
            return sentences.join(' ');
        }

        function generateText(paragraphCount, sentencesPerParagraph) {
            const paragraphs = [];
            for (let i = 0; i < paragraphCount; i++) {
                paragraphs.push(generateParagraph(sentencesPerParagraph, i === 0));
            }
            return paragraphs.join('\n\n');
        }

        function updateText() {
            const sentenceCount = parseInt(document.getElementById('sentences').value);
            const paragraphCount = parseInt(document.getElementById('paragraphs').value);

            const text = generateText(paragraphCount, sentenceCount);
            document.getElementById('output').value = text;
        }

        // Event listeners for sliders
        const sentencesSlider = document.getElementById('sentences');
        const paragraphsSlider = document.getElementById('paragraphs');
        const sentencesValue = document.getElementById('sentencesValue');
        const paragraphsValue = document.getElementById('paragraphsValue');

        sentencesSlider.addEventListener('input', (e) => {
            sentencesValue.textContent = e.target.value;
            updateText();
        });

        paragraphsSlider.addEventListener('input', (e) => {
            paragraphsValue.textContent = e.target.value;
            updateText();
        });

        // Copy to clipboard functionality
        const copyBtn = document.getElementById('copyBtn');
        copyBtn.addEventListener('click', async () => {
            const output = document.getElementById('output');

            try {
                await navigator.clipboard.writeText(output.value);
                copyBtn.textContent = '✓ Kopierat!';
                copyBtn.classList.add('copied');

                setTimeout(() => {
                    copyBtn.textContent = 'Kopiera till urklipp';
                    copyBtn.classList.remove('copied');
                }, 2000);
            } catch (err) {
                // Fallback for older browsers
                output.select();
                document.execCommand('copy');
                copyBtn.textContent = '✓ Kopierat!';
                copyBtn.classList.add('copied');

                setTimeout(() => {
                    copyBtn.textContent = 'Kopiera till urklipp';
                    copyBtn.classList.remove('copied');
                }, 2000);
            }
        });

        // Generate initial text
        updateText();
    </script>
</Layout>
