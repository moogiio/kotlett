---
import Layout from '../layouts/Layout.astro';
---

<Layout title="Meat Match - Hitta din favorit kotlett">
    <div class="container">
        <h1>Meat Matcher</h1>
        <p class="subtitle">Swipa dig fram till din perfekta kotlett!</p>

        <div class="game-wrapper">
            <div class="card-container" id="cardContainer">
                <!-- Cards will be inserted here -->
            </div>

            <div class="start-screen" id="startScreen">
                <div class="start-content">
                    <h2>V√§lkommen till Meat Matcher!</h2>
                    <p>Svara p√• 10 fr√•gor genom att swipa h√∂ger (JA) eller v√§nster (NEJ)</p>
                    <p>Vi kommer att matcha dig med din perfekta kotlett!</p>
                    <button class="start-button" id="startButton">B√∂rja matcha</button>
                </div>
            </div>

            <div class="result-screen hidden" id="resultScreen">
                <div class="result-content">
                    <h2>Din perfekta match!</h2>
                    <div class="cutlet-result" id="cutletResult">
                        <!-- Result will be inserted here -->
                    </div>
                    <button class="restart-button" id="restartButton">Matcha igen</button>
                </div>
            </div>

            <div class="progress-bar" id="progressBar">
                <div class="progress-fill" id="progressFill"></div>
                <span class="progress-text" id="progressText">0/10</span>
            </div>

            <div class="swipe-buttons" id="swipeButtons">
                <button class="swipe-btn swipe-left" id="swipeLeftBtn">
                    <span class="btn-icon">‚úï</span>
                    <span class="btn-text">NEJ</span>
                </button>
                <button class="swipe-btn swipe-right" id="swipeRightBtn">
                    <span class="btn-icon">‚ô•</span>
                    <span class="btn-text">JA</span>
                </button>
            </div>
        </div>
    </div>
</Layout>

<script>
    interface Question {
        id: number;
        text: string;
        emoji: string;
        yesPoints: Record<string, number>;
        noPoints: Record<string, number>;
    }

    interface CutletResult {
        name: string;
        description: string;
        emoji: string;
        characteristics: string[];
        recipe?: string;
    }

    const allQuestions: Question[] = [
        {
            id: 1,
            text: "Gillar du smaker fr√•n Medelhavet?",
            emoji: "üåä",
            yesPoints: { greek: 3, mediterranean: 3, french: 2 },
            noPoints: { classic: 2, asian: 2 }
        },
        {
            id: 2,
            text: "F√∂redrar du krispiga, panerade kotletter?",
            emoji: "‚ú®",
            yesPoints: { schnitzel: 3, italian: 2, crispy: 3 },
            noPoints: { grilled: 2, smoked: 2 }
        },
        {
            id: 3,
            text: "√Ñr du sugen p√• n√•got exotiskt och asiatiskt?",
            emoji: "ü•¢",
            yesPoints: { asian: 3, teriyaki: 3 },
            noPoints: { classic: 2, mediterranean: 1 }
        },
        {
            id: 4,
            text: "√Ñlskar du stark, kryddig mat?",
            emoji: "üå∂Ô∏è",
            yesPoints: { spicy: 3, asian: 2, mexican: 2 },
            noPoints: { classic: 2, french: 2 }
        },
        {
            id: 5,
            text: "F√∂redrar du enklare, klassiska smaker?",
            emoji: "üë®‚Äçüç≥",
            yesPoints: { classic: 3, grilled: 2 },
            noPoints: { teriyaki: 2, mexican: 1 }
        },
        {
            id: 6,
            text: "Gillar du citrus och fr√§scha smaker?",
            emoji: "üçã",
            yesPoints: { mediterranean: 2, greek: 3, mexican: 2 },
            noPoints: { smoked: 2, classic: 1 }
        },
        {
            id: 7,
            text: "√Ñr ost ett m√•ste i din mat?",
            emoji: "üßÄ",
            yesPoints: { italian: 3, french: 3, schnitzel: 2 },
            noPoints: { asian: 2, greek: 1 }
        },
        {
            id: 8,
            text: "F√∂redrar du marinerade kotletter framf√∂r panerade?",
            emoji: "üçñ",
            yesPoints: { grilled: 3, greek: 2, teriyaki: 3 },
            noPoints: { schnitzel: 2, italian: 2 }
        },
        {
            id: 9,
            text: "Gillar du rostade, karamelliserade smaker?",
            emoji: "üî•",
            yesPoints: { grilled: 3, teriyaki: 2, smoked: 2 },
            noPoints: { schnitzel: 1 }
        },
        {
            id: 10,
            text: "F√∂redrar du traditionella recept framf√∂r moderna?",
            emoji: "üìñ",
            yesPoints: { classic: 3, french: 2, schnitzel: 2 },
            noPoints: { mexican: 2, spicy: 2 }
        },
        {
            id: 11,
            text: "Tycker du r√∂kig smak g√∂r maten b√§ttre?",
            emoji: "üí®",
            yesPoints: { smoked: 3, grilled: 2 },
            noPoints: { french: 2, italian: 1 }
        },
        {
            id: 12,
            text: "Gillar du s√∂ta och salta kombinationer?",
            emoji: "üçØ",
            yesPoints: { teriyaki: 3, asian: 2, honeygarlic: 3 },
            noPoints: { classic: 2, mediterranean: 1 }
        },
        {
            id: 13,
            text: "F√∂redrar du mat med mycket vitl√∂k?",
            emoji: "üßÑ",
            yesPoints: { greek: 3, mediterranean: 2, honeygarlic: 2 },
            noPoints: { classic: 2, teriyaki: 1 }
        },
        {
            id: 14,
            text: "√Ñr du sugen p√• n√•got med taco-vibes?",
            emoji: "üåÆ",
            yesPoints: { mexican: 3, spicy: 2 },
            noPoints: { french: 2, italian: 2 }
        },
        {
            id: 15,
            text: "Gillar du mat med rika, kr√§miga s√•ser?",
            emoji: "ü•õ",
            yesPoints: { french: 3, classic: 2 },
            noPoints: { grilled: 2, asian: 1 }
        },
        {
            id: 16,
            text: "F√∂redrar du k√∂tt som sm√§lter i munnen?",
            emoji: "üí´",
            yesPoints: { smoked: 3, french: 2, grilled: 2 },
            noPoints: { schnitzel: 1 }
        },
        {
            id: 17,
            text: "√Ñr du sugen p√• n√•got med honung?",
            emoji: "üçØ",
            yesPoints: { honeygarlic: 3, teriyaki: 2 },
            noPoints: { spicy: 2, schnitzel: 1 }
        },
        {
            id: 18,
            text: "Tycker du √∂rter g√∂r maten b√§ttre?",
            emoji: "üåø",
            yesPoints: { mediterranean: 3, greek: 2, french: 2 },
            noPoints: { asian: 1, mexican: 1 }
        },
        {
            id: 19,
            text: "F√∂redrar du mat med koriander och lime?",
            emoji: "üåø",
            yesPoints: { mexican: 3, spicy: 2, asian: 1 },
            noPoints: { classic: 2, french: 2 }
        },
        {
            id: 20,
            text: "Gillar du umami-rika smaker?",
            emoji: "üçÑ",
            yesPoints: { teriyaki: 3, asian: 3, smoked: 2 },
            noPoints: { classic: 1, mediterranean: 1 }
        }
    ];

    // Select 10 random questions for each game session
    let questions: Question[] = [];

    const cutletResults: Record<string, CutletResult> = {
        greek: {
            name: "Grekiska Lammkotletter",
            description: "Med citron, vitl√∂k och oregano - en medelhavsdr√∂m!",
            emoji: "üá¨üá∑",
            characteristics: [
                "Marinerad i olivolja och citron",
                "Kryddad med oregano och vitl√∂k",
                "Serveras med tzatziki",
                "Perfekt f√∂r sommargrillen"
            ],
            recipe: "/recept/grekiska-lammkotletter"
        },
        italian: {
            name: "Veal Parmigiana",
            description: "Krispiga, ostiga och helt oemotst√•ndliga!",
            emoji: "üáÆüáπ",
            characteristics: [
                "Panerade med parmesan",
                "Krispigt skal med saftigt k√∂tt",
                "Perfekt med pasta eller sallad",
                "Smak av Italien"
            ],
            recipe: "/recept/veal-parmigiana"
        },
        schnitzel: {
            name: "Wiener Schnitzel",
            description: "Den klassiska √∂sterrikiska favoriten!",
            emoji: "ü•á",
            characteristics: [
                "Tunnklappad och panerad",
                "Gyllene och krispy",
                "Serveras med citronsklyftor",
                "Traditionell och √§lskad"
            ],
            recipe: "/recept/wiener-schnitzel"
        },
        classic: {
            name: "Klassisk Stekt Fl√§skkotlett",
            description: "Enkelt, gott och tidl√∂st!",
            emoji: "üá∏üá™",
            characteristics: [
                "Salt, peppar och sm√∂r",
                "Stekta till perfektion",
                "Serveras med gr√§dds√•s",
                "Svenskt husmanskost"
            ],
            recipe: "/recept/klassisk-stekt-flaskkotlett"
        },
        asian: {
            name: "Tonkatsu",
            description: "Japansk friterad fl√§skkotlett med krispig panko!",
            emoji: "ü•¢",
            characteristics: [
                "Panerad med panko",
                "Friterad till perfektion",
                "Serveras med tonkatsus√•s",
                "Japansk favorit"
            ],
            recipe: "/recept/tonkatsu"
        },
        spicy: {
            name: "Mexikanska Kotletter",
            description: "F√∂r dig som gillar det hett och smakrikt!",
            emoji: "üå∂Ô∏è",
            characteristics: [
                "Marinerad med chili och lime",
                "Stark och fr√§sch samtidigt",
                "Perfekt balans av hetta",
                "Moderna smaker"
            ],
            recipe: "/recept/milanesa-argentina"
        },
        grilled: {
            name: "Grillad Lammkotlett med Vitl√∂k",
            description: "Rostade till perfektion med r√∂kig smak!",
            emoji: "üî•",
            characteristics: [
                "Grillad √∂ver √∂ppen eld",
                "R√∂kig och karamelliserad yta",
                "Perfekt till sommaren",
                "Klassisk grillmat"
            ],
            recipe: "/recept/grillad-lammkotlett-med-vitlok"
        },
        mediterranean: {
            name: "Lammkotlett med Rosmarin",
            description: "Solkyssta smaker fr√•n Medelhavet!",
            emoji: "‚òÄÔ∏è",
            characteristics: [
                "Olivolja, timjan och rosmarin",
                "L√§tta och fr√§scha smaker",
                "Serveras med gr√∂nsaker",
                "H√§lsosamt och gott"
            ],
            recipe: "/recept/lammkotlett-med-rosmarin"
        },
        teriyaki: {
            name: "Tonkatsu",
            description: "S√∂t, salt och umami - japansk perfektion!",
            emoji: "üç±",
            characteristics: [
                "Glaserad med teriyakis√•s",
                "S√∂t och salt balans",
                "Serveras med sesamfr√∂n",
                "Asiatisk favorit"
            ],
            recipe: "/recept/tonkatsu"
        },
        mexican: {
            name: "Milanesa Argentina",
            description: "Kryddig, fr√§sch och full av liv!",
            emoji: "üåÆ",
            characteristics: [
                "Kryddad med cumin och koriander",
                "Serveras med lime och salsa",
                "Perfekt i tacos",
                "Festlig och smakrik"
            ],
            recipe: "/recept/milanesa-argentina"
        },
        french: {
            name: "Fl√§skkotlett med Dragon",
            description: "Elegant med senap, gr√§dde och dragon - ooh la la!",
            emoji: "üá´üá∑",
            characteristics: [
                "Tillagad med dijonsenap",
                "Kr√§mig dragons√•s",
                "Raffinerad smak",
                "Klassisk fransk mat"
            ],
            recipe: "/recept/flaskkotlett-med-dragon"
        },
        smoked: {
            name: "Italienska L√•ngkokta Kotletter",
            description: "L√•ngsamt kokta f√∂r maximal sm√∂righet!",
            emoji: "üí®",
            characteristics: [
                "Kokta i flera timmar",
                "Sm√§lter i munnen",
                "Djup rik smak",
                "Italiensk tradition"
            ],
            recipe: "/recept/italienska-langkokta-kotletter"
        },
        honeygarlic: {
            name: "Fl√§skkotlett med √Ñpple",
            description: "Perfekt balans mellan s√∂tt och smakrikt!",
            emoji: "üçØ",
            characteristics: [
                "Serveras med stekta √§pplen",
                "S√∂t och salt kombination",
                "Karamelliserad yta",
                "Familjefavorit"
            ],
            recipe: "/recept/flaskkotlett-med-apple"
        }
    };

    class MeatMatchGame {
        private currentQuestion: number = 0;
        private answers: boolean[] = [];
        private scores: Record<string, number> = {};
        private startX: number = 0;
        private currentX: number = 0;
        private isDragging: boolean = false;
        private currentCard: HTMLElement | null = null;

        constructor() {
            this.initializeScores();
            this.bindEvents();
            this.showStartScreen();
        }

        private initializeScores(): void {
            Object.keys(cutletResults).forEach(key => {
                this.scores[key] = 0;
            });
        }

        private bindEvents(): void {
            const startButton = document.getElementById('startButton');
            const restartButton = document.getElementById('restartButton');
            const swipeLeftBtn = document.getElementById('swipeLeftBtn');
            const swipeRightBtn = document.getElementById('swipeRightBtn');

            if (startButton) {
                startButton.addEventListener('click', () => this.startGame());
            }

            if (restartButton) {
                restartButton.addEventListener('click', () => this.restartGame());
            }

            if (swipeLeftBtn) {
                swipeLeftBtn.addEventListener('click', () => this.handleSwipe(false));
            }

            if (swipeRightBtn) {
                swipeRightBtn.addEventListener('click', () => this.handleSwipe(true));
            }
        }

        private showStartScreen(): void {
            const startScreen = document.getElementById('startScreen');
            const progressBar = document.getElementById('progressBar');
            const swipeButtons = document.getElementById('swipeButtons');

            if (startScreen) startScreen.classList.remove('hidden');
            if (progressBar) progressBar.classList.add('hidden');
            if (swipeButtons) swipeButtons.classList.add('hidden');
        }

        private selectRandomQuestions(): void {
            // Shuffle all questions and pick 10
            const shuffled = [...allQuestions].sort(() => Math.random() - 0.5);
            questions = shuffled.slice(0, 10);
        }

        private startGame(): void {
            const startScreen = document.getElementById('startScreen');
            const progressBar = document.getElementById('progressBar');
            const swipeButtons = document.getElementById('swipeButtons');

            if (startScreen) startScreen.classList.add('hidden');
            if (progressBar) progressBar.classList.remove('hidden');
            if (swipeButtons) swipeButtons.classList.remove('hidden');

            this.currentQuestion = 0;
            this.answers = [];
            this.initializeScores();
            this.selectRandomQuestions();
            this.showQuestion();
        }

        private showQuestion(): void {
            const container = document.getElementById('cardContainer');
            if (!container) return;

            const question = questions[this.currentQuestion];

            const card = document.createElement('div');
            card.className = 'card';
            card.innerHTML = `
                <div class="card-emoji">${question.emoji}</div>
                <div class="card-question">${question.text}</div>
                <div class="card-number">Fr√•ga ${this.currentQuestion + 1} av ${questions.length}</div>
            `;

            // Add touch/mouse events for swiping
            card.addEventListener('mousedown', (e) => this.onDragStart(e));
            card.addEventListener('touchstart', (e) => this.onDragStart(e));
            card.addEventListener('mousemove', (e) => this.onDragMove(e));
            card.addEventListener('touchmove', (e) => this.onDragMove(e));
            card.addEventListener('mouseup', (e) => this.onDragEnd(e));
            card.addEventListener('touchend', (e) => this.onDragEnd(e));
            card.addEventListener('mouseleave', (e) => this.onDragEnd(e));

            container.innerHTML = '';
            container.appendChild(card);
            this.currentCard = card;

            // Animate in
            setTimeout(() => card.classList.add('visible'), 10);

            this.updateProgress();
        }

        private onDragStart(e: MouseEvent | TouchEvent): void {
            this.isDragging = true;
            this.startX = e instanceof MouseEvent ? e.clientX : e.touches[0].clientX;
            if (this.currentCard) {
                this.currentCard.style.transition = 'none';
            }
        }

        private onDragMove(e: MouseEvent | TouchEvent): void {
            if (!this.isDragging || !this.currentCard) return;

            const clientX = e instanceof MouseEvent ? e.clientX : e.touches[0].clientX;
            this.currentX = clientX - this.startX;

            const rotation = this.currentX / 20;
            const opacity = Math.max(0.5, 1 - Math.abs(this.currentX) / 300);

            this.currentCard.style.transform = `translateX(${this.currentX}px) rotate(${rotation}deg)`;
            this.currentCard.style.opacity = opacity.toString();

            // Show swipe indicators
            if (this.currentX > 50) {
                this.currentCard.classList.add('swipe-right-hint');
                this.currentCard.classList.remove('swipe-left-hint');
            } else if (this.currentX < -50) {
                this.currentCard.classList.add('swipe-left-hint');
                this.currentCard.classList.remove('swipe-right-hint');
            } else {
                this.currentCard.classList.remove('swipe-right-hint', 'swipe-left-hint');
            }
        }

        private onDragEnd(e: MouseEvent | TouchEvent): void {
            if (!this.isDragging || !this.currentCard) return;

            this.isDragging = false;

            if (Math.abs(this.currentX) > 100) {
                // Swipe completed
                const isYes = this.currentX > 0;
                this.animateSwipeOut(isYes);
            } else {
                // Return to center
                this.currentCard.style.transition = 'all 0.3s ease';
                this.currentCard.style.transform = 'translateX(0) rotate(0)';
                this.currentCard.style.opacity = '1';
                this.currentCard.classList.remove('swipe-right-hint', 'swipe-left-hint');
            }

            this.currentX = 0;
        }

        private animateSwipeOut(isYes: boolean): void {
            if (!this.currentCard) return;

            const direction = isYes ? 1 : -1;
            this.currentCard.style.transition = 'all 0.3s ease';
            this.currentCard.style.transform = `translateX(${direction * 500}px) rotate(${direction * 30}deg)`;
            this.currentCard.style.opacity = '0';

            setTimeout(() => {
                this.handleSwipe(isYes);
            }, 300);
        }

        private handleSwipe(answer: boolean): void {
            const question = questions[this.currentQuestion];
            this.answers.push(answer);

            // Update scores
            const points = answer ? question.yesPoints : question.noPoints;
            Object.keys(points).forEach(key => {
                if (this.scores[key] !== undefined) {
                    this.scores[key] += points[key];
                }
            });

            this.currentQuestion++;

            if (this.currentQuestion < questions.length) {
                setTimeout(() => this.showQuestion(), 300);
            } else {
                setTimeout(() => this.showResult(), 500);
            }
        }

        private updateProgress(): void {
            const progressFill = document.getElementById('progressFill');
            const progressText = document.getElementById('progressText');

            const percentage = (this.currentQuestion / questions.length) * 100;

            if (progressFill) {
                progressFill.style.width = `${percentage}%`;
            }

            if (progressText) {
                progressText.textContent = `${this.currentQuestion}/${questions.length}`;
            }
        }

        private showResult(): void {
            // Find the cutlet with highest score
            let maxScore = -1;
            let winningCutlet = 'classic';

            Object.keys(this.scores).forEach(key => {
                if (this.scores[key] > maxScore) {
                    maxScore = this.scores[key];
                    winningCutlet = key;
                }
            });

            const result = cutletResults[winningCutlet];

            const resultScreen = document.getElementById('resultScreen');
            const resultContent = document.getElementById('cutletResult');
            const progressBar = document.getElementById('progressBar');
            const swipeButtons = document.getElementById('swipeButtons');
            const cardContainer = document.getElementById('cardContainer');

            if (progressBar) progressBar.classList.add('hidden');
            if (swipeButtons) swipeButtons.classList.add('hidden');
            if (cardContainer) cardContainer.innerHTML = '';

            if (resultContent) {
                resultContent.innerHTML = `
                    <div class="result-emoji">${result.emoji}</div>
                    <h3 class="result-name">${result.name}</h3>
                    <p class="result-description">${result.description}</p>
                    <div class="result-characteristics">
                        <h4>K√§nnetecken:</h4>
                        <div class="characteristics-grid">
                            ${result.characteristics.map(char => `<div class="characteristic-item">${char}</div>`).join('')}
                        </div>
                        ${result.recipe ? `<div class="result-actions"><a href="${result.recipe}" class="recipe-btn">Se recept ‚Üí</a></div>` : ''}
                    </div>
                `;
            }

            if (resultScreen) {
                resultScreen.classList.remove('hidden');
            }
        }

        private restartGame(): void {
            const resultScreen = document.getElementById('resultScreen');
            if (resultScreen) resultScreen.classList.add('hidden');

            this.startGame();
        }
    }

    // Initialize game when DOM is ready
    document.addEventListener('DOMContentLoaded', () => {
        new MeatMatchGame();
    });
</script>

<style>
    .container {
        max-width: 600px;
    }

    .subtitle {
        text-align: center;
        font-size: 1.3rem;
        margin-bottom: 3rem;
        color: #5d3a1a;
        border-bottom: 2px solid #8b5a2b;
        padding-bottom: 1.5rem;
    }

    .game-wrapper {
        background: linear-gradient(135deg, rgba(255, 182, 193, 0.15), rgba(255, 218, 185, 0.15));
        padding: 2rem;
        border: 3px solid #8b5a2b;
        border-radius: 16px;
        min-height: 600px;
        position: relative;
    }

    .card-container {
        width: 100%;
        height: 450px;
        position: relative;
        margin-bottom: 2rem;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .card {
        position: absolute;
        width: 100%;
        max-width: 400px;
        height: 400px;
        background: white;
        border-radius: 20px;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
        padding: 3rem 2rem;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        text-align: center;
        cursor: grab;
        user-select: none;
        opacity: 0;
        transform: scale(0.9);
        transition: all 0.3s ease;
    }

    .card.visible {
        opacity: 1;
        transform: scale(1);
    }

    .card:active {
        cursor: grabbing;
    }

    .card-emoji {
        font-size: 5rem;
        margin-bottom: 2rem;
    }

    .card-question {
        font-size: 1.8rem;
        color: #5d3a1a;
        font-weight: 600;
        margin-bottom: 1.5rem;
        line-height: 1.4;
    }

    .card-number {
        font-size: 1rem;
        color: #999;
        font-weight: 500;
        margin-top: auto;
    }

    .card.swipe-right-hint::after {
        content: "‚ô• JA";
        position: absolute;
        top: 50px;
        right: 50px;
        font-size: 3rem;
        color: #4caf50;
        font-weight: bold;
        opacity: 0.7;
        transform: rotate(20deg);
    }

    .card.swipe-left-hint::after {
        content: "‚úï NEJ";
        position: absolute;
        top: 50px;
        left: 50px;
        font-size: 3rem;
        color: #f44336;
        font-weight: bold;
        opacity: 0.7;
        transform: rotate(-20deg);
    }

    .start-screen,
    .result-screen {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
        background: linear-gradient(135deg, rgba(255, 182, 193, 0.3), rgba(255, 218, 185, 0.3));
        border-radius: 16px;
        z-index: 10;
    }

    .start-screen.hidden,
    .result-screen.hidden {
        display: none;
    }

    .start-content,
    .result-content {
        text-align: center;
        padding: 2rem;
        max-width: 500px;
    }

    .start-content h2,
    .result-content h2 {
        font-family: 'Bebas Neue', sans-serif;
        font-size: 2.5rem;
        color: #8b2e0b;
        margin-bottom: 1.5rem;
        letter-spacing: 2px;
    }

    .start-content p {
        font-size: 1.2rem;
        color: #5d3a1a;
        margin-bottom: 1rem;
        line-height: 1.6;
    }

    .start-button,
    .restart-button {
        margin-top: 2rem;
        padding: 1rem 3rem;
        background: linear-gradient(135deg, #ff6b9d, #ffa06b);
        color: white;
        border: none;
        border-radius: 50px;
        font-family: 'Bebas Neue', sans-serif;
        font-size: 1.5rem;
        cursor: pointer;
        transition: all 0.3s;
        text-transform: uppercase;
        letter-spacing: 2px;
        box-shadow: 0 5px 20px rgba(255, 107, 157, 0.4);
    }

    .start-button:hover,
    .restart-button:hover {
        transform: translateY(-3px);
        box-shadow: 0 8px 25px rgba(255, 107, 157, 0.6);
    }

    .progress-bar {
        width: 100%;
        height: 40px;
        background: rgba(255, 255, 255, 0.5);
        border-radius: 20px;
        margin-bottom: 2rem;
        position: relative;
        overflow: hidden;
        border: 2px solid #8b5a2b;
    }

    .progress-bar.hidden {
        display: none;
    }

    .progress-fill {
        height: 100%;
        background: linear-gradient(90deg, #ff6b9d, #ffa06b);
        border-radius: 20px;
        width: 0;
        transition: width 0.3s ease;
    }

    .progress-text {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        font-family: 'Bebas Neue', sans-serif;
        font-size: 1.2rem;
        color: #5d3a1a;
        font-weight: 700;
    }

    .swipe-buttons {
        display: flex;
        gap: 2rem;
        justify-content: center;
        margin-top: 2rem;
    }

    .swipe-buttons.hidden {
        display: none;
    }

    .swipe-btn {
        width: 70px;
        height: 70px;
        border-radius: 50%;
        border: 3px solid;
        background: white;
        cursor: pointer;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        transition: all 0.2s;
        font-family: 'Bebas Neue', sans-serif;
    }

    .swipe-btn:hover {
        transform: scale(1.1);
    }

    .swipe-btn:active {
        transform: scale(0.95);
    }

    .swipe-left {
        border-color: #f44336;
        color: #f44336;
    }

    .swipe-left:hover {
        background: #f44336;
        color: white;
    }

    .swipe-right {
        border-color: #4caf50;
        color: #4caf50;
    }

    .swipe-right:hover {
        background: #4caf50;
        color: white;
    }

    .btn-icon {
        font-size: 2rem;
        line-height: 1;
    }

    .btn-text {
        font-size: 0.8rem;
        margin-top: 0.2rem;
    }

    .cutlet-result {
        background: #f5f1e8;
        padding: 0;
        border: 6px solid #8b2e0b;
        border-radius: 0;
        box-shadow:
            12px 12px 0 rgba(139, 46, 11, 0.3),
            0 0 0 2px #5d3a1a;
        position: relative;
    }

    .cutlet-result::before {
        content: '';
        position: absolute;
        top: -3px;
        left: -3px;
        right: -3px;
        bottom: -3px;
        background: repeating-linear-gradient(
            45deg,
            transparent,
            transparent 10px,
            rgba(139, 46, 11, 0.1) 10px,
            rgba(139, 46, 11, 0.1) 20px
        );
        z-index: -1;
        pointer-events: none;
    }

    .result-emoji {
        font-size: 8rem;
        margin: 0;
        padding: 2rem 0 1rem 0;
        background: #8b2e0b;
        border-bottom: 6px solid #5d1f08;
        text-align: center;
        line-height: 1;
        filter: drop-shadow(3px 3px 0 rgba(0, 0, 0, 0.2));
    }

    .result-name {
        font-family: 'Bebas Neue', sans-serif;
        font-size: 2.5rem;
        color: #f5f1e8;
        background: #5d3a1a;
        margin: 0;
        padding: 1.5rem 2rem;
        letter-spacing: 3px;
        text-transform: uppercase;
        text-align: center;
        border-bottom: 4px solid #2a1810;
        text-shadow: 3px 3px 0 rgba(0, 0, 0, 0.3);
    }

    .result-description {
        font-size: 1.3rem;
        color: #5d3a1a;
        margin: 0;
        padding: 2rem;
        line-height: 1.6;
        background: rgba(139, 90, 43, 0.1);
        border-bottom: 4px dashed #8b5a2b;
        font-weight: 600;
        text-align: center;
        font-style: italic;
    }

    .result-characteristics {
        text-align: left;
        margin: 0;
        padding: 2.5rem;
        background: #fffef9;
    }

    .result-characteristics h4 {
        font-family: 'Bebas Neue', sans-serif;
        font-size: 1.8rem;
        color: #8b2e0b;
        margin: 0 0 2rem 0;
        letter-spacing: 2px;
        text-transform: uppercase;
        border-left: 6px solid #8b2e0b;
        padding-left: 1rem;
        background: rgba(139, 46, 11, 0.05);
        padding-top: 0.75rem;
        padding-bottom: 0.75rem;
    }

    .characteristics-grid {
        padding: 0;
        margin: 0;
        display: grid;
        gap: 2rem;
    }

    .characteristic-item {
        padding: 2rem 3rem;
        padding-left: 5rem;
        position: relative;
        color: #2a1810;
        line-height: 2.2;
        background: white;
        border: 3px solid #8b5a2b;
        border-left: 6px solid #8b2e0b;
        font-weight: 600;
        font-size: 1.15rem;
        box-shadow: 4px 4px 0 rgba(139, 90, 43, 0.2);
        transition: all 0.2s;
    }

    .characteristic-item:hover {
        transform: translate(-2px, -2px);
        box-shadow: 6px 6px 0 rgba(139, 90, 43, 0.3);
    }

    .characteristic-item::before {
        content: "ü•©";
        position: absolute;
        left: 1.5rem;
        top: 50%;
        transform: translateY(-50%);
        font-size: 1.8rem;
    }

    .result-actions {
        margin-top: 2rem;
        padding-top: 2rem;
        border-top: 4px dashed #8b5a2b;
        text-align: center;
    }

    .result-actions .recipe-btn {
        width: 100%;
        font-size: 1.5rem;
        padding: 1.5rem 2rem;
        box-shadow: 6px 6px 0 #5d1f08;
    }

    .result-actions .recipe-btn:hover {
        transform: translate(-2px, -2px);
        box-shadow: 8px 8px 0 #5d1f08;
    }

    .result-actions .recipe-btn:active {
        transform: translate(2px, 2px);
        box-shadow: 2px 2px 0 #5d1f08;
    }

    @media (max-width: 768px) {
        .game-wrapper {
            padding: 1rem;
            min-height: 500px;
        }

        .card {
            height: 350px;
            padding: 2rem 1.5rem;
        }

        .card-container {
            height: 400px;
        }

        .card-emoji {
            font-size: 4rem;
        }

        .card-question {
            font-size: 1.4rem;
        }

        .start-content h2,
        .result-content h2 {
            font-size: 2rem;
        }

        .swipe-btn {
            width: 60px;
            height: 60px;
        }

        .btn-icon {
            font-size: 1.5rem;
        }

        .cutlet-result {
            box-shadow:
                8px 8px 0 rgba(139, 46, 11, 0.3),
                0 0 0 2px #5d3a1a;
        }

        .result-emoji {
            font-size: 6rem;
            padding: 1.5rem 0 0.75rem 0;
        }

        .result-name {
            font-size: 2rem;
            padding: 1rem 1.5rem;
            letter-spacing: 2px;
        }

        .result-description {
            font-size: 1.1rem;
            padding: 1.5rem;
        }

        .result-characteristics {
            padding: 2rem 1.5rem;
        }

        .result-characteristics h4 {
            font-size: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .characteristics-grid {
            gap: 1.5rem;
        }

        .characteristic-item {
            padding: 1.5rem 2rem;
            padding-left: 4rem;
            font-size: 1rem;
            line-height: 2;
            box-shadow: 3px 3px 0 rgba(139, 90, 43, 0.2);
        }

        .characteristic-item:hover {
            transform: translate(-1px, -1px);
            box-shadow: 4px 4px 0 rgba(139, 90, 43, 0.3);
        }

        .characteristic-item::before {
            font-size: 1.5rem;
            left: 1.2rem;
        }

        .result-actions .recipe-btn {
            font-size: 1.3rem;
            padding: 1.2rem 1.5rem;
            box-shadow: 4px 4px 0 #5d1f08;
        }

        .result-actions .recipe-btn:hover {
            box-shadow: 5px 5px 0 #5d1f08;
        }
    }
</style>
